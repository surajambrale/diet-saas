<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Select Plan</title>
</head>
<body>
  <h1>Choose Plan</h1>

  <div>
    <button onclick="selectPlan('Weight Loss', 499)">Weight Loss - ₹499</button>
    <button onclick="selectPlan('Muscle Gain', 699)">Muscle Gain - ₹699</button>
    <button onclick="selectPlan('General Fitness', 399)">General Fitness - ₹399</button>
  </div>

  <script>
    // call this when user clicks a plan
    function selectPlan(plan, price) {
      // save to sessionStorage as primary (survives redirects in same tab)
      sessionStorage.setItem("selectedPlan", plan);
      sessionStorage.setItem("selectedPrice", String(price));

      // If user logged in, we likely have email saved in localStorage (from login)
      const email = localStorage.getItem("userEmail") || "";

      if (!email) {
        // not logged in -> send plan info to login so it can redirect to payment after login
        window.location.href = `login.html?plan=${encodeURIComponent(plan)}&price=${encodeURIComponent(price)}`;
      } else {
        // already logged in -> go to payment page with params (URL ensures mobile works)
        window.location.href = `payment.html?plan=${encodeURIComponent(plan)}&price=${encodeURIComponent(price)}&email=${encodeURIComponent(email)}`;
      }
    }
  </script>
</body>
</html>
